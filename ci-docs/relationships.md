---
title: العلاقات بين الكيانات ومسارات الكيانات
description: إنشاء العلاقات بين الكيانات من مصادر بيانات متعددة وإدارتها.
ms.date: 09/27/2021
ms.reviewer: mhart
ms.subservice: audience-insights
ms.topic: conceptual
author: CadeSanthaMSFT
ms.author: cadesantha
manager: shellyha
searchScope:
- ci-semantic-mapping
- ci-entities
- ci-relationships
- ci-activities
- ci-activities-wizard
- ci-measures
- ci-segments
- ci-segment-builder
- ci-measure-builder
- ci-measure-template
- ci-permissions
- customerInsights
ms.openlocfilehash: e622e5fa0b5738e31db1c668d95312adbc4f7d36
ms.sourcegitcommit: ad74ace653db9a25fce4343adef7db1c9b0d8904
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 07/21/2022
ms.locfileid: "9183527"
---
# <a name="relationships-between-entities-and-entity-paths"></a>العلاقات بين الكيانات ومسارات الكيانات

تقوم العلاقات بتوصيل الكيانات وتحدد رسمًا بيانيًا لبياناتك عندما تتشارك الكيانات في معرف عام، وهو مفتاح أجنبي. يمكن الإشارة إلى هذا المفتاح الخارجي من كيان إلى آخر. تمكّن الكيانات المتصلة تعريف المقاطع والمقاييس استنادًا إلى مصادر بيانات متعددة.

هناك ثلاثة أنواع من العلاقات: 
- علاقات النظام غير القابلة للتحرير، التي يقوم النظام بإنشائها النظام كجزء من عملية توحيد البيانات
- العلاقات المتوارثة غير القابلة للتحرير، والتي يتم إنشاؤها بشكل تلقائي نتيجة استيعاب مصادر البيانات
- العلاقات المخصصة القابلة للتحرير، التي يتم إنشاؤها وتكوينها بواسطة المستخدمين

## <a name="non-editable-system-relationships"></a>علاقات النظام غير القابلة للتحرير

أثناء تحديث البيانات، يتم إنشاء علاقات النظام بشكل تلقائي بالاستناد إلى التطابق الذكي. بإمكان هذه العلاقات أن تساعد على ربط ملف تعريف بالعميل بالسجلات المناظرة. يوضح المخطط التالي إنشاء العلاقات الثلاث القائمة على النظام. تتم مطابقة كيان العميل مع الكيانات الأخرى لإنتاج كيان *العميل* الموحد.

:::image type="content" source="media/relationships-entities-merge.png" alt-text="مخطط مع مسارات علاقات كيان العميل مع ثلاث علاقات واحد إلى متعدد.":::

- تم إنشاء ***علاقة* ‏CustomerToContact** بين كيان *العميل* وكيان *جهة الاتصال*. يتلقى كيان *العميل*  حقل المفتاح **Contact_contactID** للربط بحقل المفتاح **contactID** للكيان *جهة الاتصال*.
- تم إنشاء ***علاقة* ‏CustomerToAccount** بين كيان *العميل* وكيان *الحساب*. يتلقى كيان *العميل* حقل المفتاح **Account_accountID** للربط بحقل المفتاح **accountID** لكيان *الحساب*.
- تم إنشاء ***علاقة* ‏CustomerToWebAccount** بين كيان *العميل* وكيان *WebAccount*. يتلقى كيان *العميل* حقل المفتاح **WebAccount_webaccountID** لربط مفتاح الحقل **webaccountID** بالكيان *WebAccount*.

## <a name="non-editable-inherited-relationships"></a>العلاقات المتوارثة غير القابلة للتحرير

أثناء عملية استيعاب البيانات، يتحقق النظام من مصادر البيانات للعلاقات الموجودة. في حال عدم وجود علاقات، يقوم النظام بإنشائها تلقائيًا. وتُستخدم هذه العلاقات أيضًا في العمليات النهائية.

## <a name="create-a-custom-relationship"></a>إنشاء علاقة مخصصة

تتكون العلاقة من *كيان مصدر* يحتوي على المفتاح الخارجي، ومن *كيان هدف* يشير إليه المفتاح الخارجي للكيان المصدر. 

1. انتقل إلى **البيانات** > **العلاقات**.

2. حدد **علاقة جديدة**.

3. في الجزء **علاقة جديدة**، أدخل المعلومات التالية:

   :::image type="content" source="media/relationship-add.png" alt-text="الجزء الجانبي للعلاقة الجديدة مع حقول إدخال فارغة.":::

   - **اسم العلاقة**: الاسم الذي يعكس الغرض من العلاقة. مثال: CustomerToSupportCase.
   - **الوصف**: وصف العلاقة.
   - **الكيان المصدر**: الكيان المستخدم كمصدر في العلاقة. مثال: SupportCase.
   - **الكيان الهدف**: الكيان المستخدم كهدف في العلاقة. مثال: العميل.
   - **العلاقة الأساسية للمصدر**:العلاقة الأساسية للكيان المصدر. تصف العلاقة الأساسية عدد العناصر المحتملة في مجموعة. وهي ترتبط دائمًا بالعلاقة الأساسية الهدف. يمكنك الاختيار بين **واحد** و **متعدد**. لا يتم دعم سوى العلاقات متعدد إلى واحد وواحد إلى واحد فقط.  
     - متعدد إلى واحد: بإمكان سجلا مصدر متعددة أن ترتبط بسجل هدف واحد. مثال: حالات دعم متعددة من عميل واحد.
     - واحد إلى واحد: يرتبط سجل مصدر واحد بسجل هدف واحد. مثال: معرف ولاء واحد لعميل واحد.

     > [!NOTE]
     > يمكن إنشاء علاقات متعدد إلى متعدد باستخدام علاقتين من النوع متعدد إلى واحد وكيان ربط، يقوم بتوصيل الكيان المصدر بالكيان الهدف.

   - **علاقة الهدف الأساسية**: العلاقة الأساسية لسجلات الكيان الهدف.
   - **حقل المفتاح المصدر**: حقل المفتاح الخارجي في الكيان المصدر. مثال: تستخدم SupportCase معرف **CaseID** كحقل مفتاح خارجي.
   - **حقل المفتاح الهدف**: حقل المفتاح للكيان الهدف. مثال: يستخدم العميل **CustomerID** كحقل المفتاح.

4. حدد **حفظ** لإنشاء العلاقة المخصصة.

## <a name="set-up-account-hierarchies"></a>إعداد التدرجات الهرمية للحسابات

يمكن للبيئات التي تم تكوينها لاستخدام حسابات الأعمال كجمهور مستهدف أساسي تكوين التدرجات الهرمية للحسابات لحسابات الأعمال ذات الصلة. على سبيل المثال، شركة لديها وحدات أعمال منفصلة.

تقوم المؤسسات بإنشاء تسلسلات هرمية للحسابات لإدارة الحسابات وعلاقاتها مع بعضها البعض بشكل أفضل. تدعم إمكانية Customer Insights التدرجات الهرمية لحسابات الوالدين والطفل الموجودة بالفعل في بيانات العميل التي تم استيعابها. على سبيل المثال، حسابات من Dynamics 365 Sales. ويمكن تكوين هذه التسلسلات الهرمية في صفحة **العلاقات**.

1. انتقل إلى **البيانات** > **العلاقات**.
1. حدد علامة تبويب **التدرج الهرمي للحسابات**.
1. حدد **التدرج الهرمي الجديد للحساب**.
1. في جزء **التدرج الهرمي للحساب**، قم بتوفير اسم للتدرج الهرمي. يقوم النظام بإنشاء اسم لكيان الإخراج، ولكن يمكنك تغييره.
1. حدد الكيان الذي يحتوي على التسلسل الهرمي لحسابك. عادة ما يكون في نفس الكيان الذي يحتوي على الحسابات.
1. حدد **معرف UID للحساب** و **معرف UID الأصل** من الكيان المحدد.
1. حدد **حفظ** لإنهاء التدرج الهرمي للحسابات.

## <a name="manage-existing-relationships"></a>إدارة العلاقات الموجودة

انتقل إلى صفحة **العلاقات** لعرض كافة الأهداف العلاقات التي تم إنشاؤها، والكيان المصدر الخاص بها، والكيان الهدف، والعلاقة الأساسية.

:::image type="content" source="media/relationships-list.png" alt-text="قائمة العلاقات والخيارات في شريط الإجراءات في صفحة العلاقات.":::

استخدم خياري **التصفية حسب** أو **بحث عن العلاقات** لتحديد علاقة معينة. لرؤية مخطط شبكة يتضمن العلاقات الموجودة وعلاقاتها الأساسية، حدد [**المصور المرئي**](#explore-the-relationship-visualizer).

حدد علاقة لعرض الإجراءات المتاحة:
- **تحرير**: تحديث خصائص العلاقات المخصصة في جزء التحرير وحفظ التغييرات.
- **حذف**: حذف العلاقات المخصصة.
- **عرض**: عرض العلاقات التي أنشأها النظام والعلاقات المتوارثة.

### <a name="explore-the-relationship-visualizer"></a>استكشاف المصور المرئي للعلاقات

يعرض المصور المرئي للعلاقات مخطط شبكة يتضمن العلاقات الموجودة بين الكيانات المتصلة وعلاقاتها الأساسية. كما أنه يتصوّر مسار العلاقة.

:::image type="content" source="media/relationship-visualizer.png" alt-text="لقطة شاشة لمخطط شبكة المصور المرئي للعلاقات مع اتصالات بين الكيانات المرتبطة.":::

لتخصيص طريقة العرض، يمكنك تغيير موقع المربعات من خلال سحبها إلى اللوحة. تشمل الخيارات الأخرى: 
- **تصدير كصورة**: حفظ طريقة العرض الحالية كملف صورة.
- **تغيير إلى تخطيط أفقي/عمودي**: اختر محاذاة الكيانات والعلاقات.
- **تحرير**: تحديث خصائص العلاقات المخصصة في جزء التحرير وحفظ التغييرات.

## <a name="relationship-paths"></a>مسارات العلاقة

يصف مسار العلاقة الكيانات المرتبطة بالعلاقات بين كيان مصدر وكيان هدف. ويتم استخدامه عند إنشاء مقطع أو مقياس يتضمن كيانات أخرى غير كيان ملف التعريف الموحد، وهناك خيارات متعددة للوصول إلى كيان ملف التعريف الموحد. قد تؤدي مسارات علاقات مختلفة إلى الحصول على نتائج مختلفة.

على سبيل المثال، يتضمن الكيان *eCommerce_eCommercePurchases* العلاقات التالية بكيان *عميل* ملف التعريف الموحد:

- eCommerce_eCommercePurchases > العميل
- eCommerce_eCommercePurchases > eCommerce_eCommerceContacts > POS_posPurchases > العميل
- eCommerce_eCommercePurchases > eCommerce_eCommerceContacts > POS_posPurchases > loyaltyScheme_loyCustomers > العميل

يحدد مسار العلاقة الكيانات التي يمكنك استخدامها عند إنشاء قواعد للقياسات أو المقاطع. من المرجح أن يؤدي تحديد الخيار الذي يتضمن مسار العلاقة الأطول إلى الحصول على نتائج أقل لأن السجلات المتطابقة يجب أن تكون جزءًا من جميع الكيانات. في هذا المثال، يجب على العميل شراء بضائع عبر التجارة الإلكترونية(eCommerce_eCommercePurchases) وعند نقطة بيع (POS_posPurchases) والمشاركة في برنامج ولاء (loyaltyScheme_loyCustomers). وعند تحديد الخيار الأول، من المرجح أن تحصل على المزيد من النتائج لأن العملاء يحتاجون فقط إلى الوجود في كيان إضافي واحد.

### <a name="direct-relationship"></a>علاقة مباشرة

يتم تصنيف العلاقة باعتبارها **علاقة مباشرة** عندما يرتبط كيان مصدر بكيان هدف بعلاقة واحدة فقط.

على سبيل المثال، إذا كان كيان نشاط يسمى *eCommerce_eCommercePurchases* يتصل بكيان هدف *eCommerce_eCommerceContacts* من خلال *ContactId* فقط، فهذه علاقة مباشرة.

:::image type="content" source="media/direct_Relationship.png" alt-text="يتصل الكيان المصدر مباشرة بالكيان الهدف.":::

#### <a name="multi-path-relationship"></a>علاقة متعددة المسارات

**العلاقة متعددة المسارات** هي نوع خاص من العلاقات المباشرة التي تربط كيان المصدر بأكثر من كيان هدف.

على سبيل المثال، إذا كان هناك كيان نشط يسمى *eCommerce_eCommercePurchases* يتصل بكيانين مستهدفين، فإن كلاً من *eCommerce_eCommerceContacts* و *loyaltyScheme_loyCustomers*، يمثلان علاقة متعددة المسارات.

:::image type="content" source="media/multi-path_relationship.png" alt-text="يتصل الكيان المصدر مباشرة بأكثر من كيان هدف واحد من خلال علاقة متعددة التنقلات.":::

### <a name="indirect-relationship"></a>علاقة غير مباشرة

يتم تصنيف العلاقة باعتبارها **علاقة غير مباشرة** عندما يرتبط كيان المصدر بواحد أو أكثر من الكيانات الإضافية قبل الارتباط بكيان مستهدف.

#### <a name="multi-hop-relationship"></a>علاقة متعددة التنقلات

**العلاقة متعددة التنقلات** عبارة عن *علاقة غير مباشرة* يسمح لك بتوصيل كيان مصدر بكيان مستهدف من خلال واحد أو أكثر من الكيانات الوسيطة الأخرى.

على سبيل المثال، إذا كان هناك كيان نشاط يسمى *eCommerce_eCommercePurchasesWest* يتصل بكيان وسيط يسمى *eCommerce_eCommercePurchasesEast* ويتصل بكيان مستهدف يسمى *eCommerce_eCommerceContacts*، فهذه علاقة متعددة التنقلات.

:::image type="content" source="media/multi-hop_relationship.png" alt-text="يتصل الكيان المصدر مباشرة بكيان هدف من خلال كيان وسيط.":::

### <a name="multi-hop-multi-path-relationship"></a>العلاقة متعددة التنقلات، متعددة المسارات

يمكن استخدام مسارات متعددة العلاقات والتنقلات معًا لإنشاء **علاقات متعددة التنقلات والمسارات**. يجمع هذا النوع الخاص بين وظائف العلاقات **متعددة التنقلات** و **متعددة المسارات**. كما يتيح لك الاتصال بأكثر من كيان هدف أثناء استخدام الكيانات الوسيطة.

على سبيل المثال، إذا كان هناك كيان نشاط يسمى *eCommerce_eCommercePurchasesWest* يتصل بكيان وسيط يسمى *eCommerce_eCommercePurchasesEast* ثم يتصل بكيانين مستهدفين، وهما *eCommerce_eCommerceContacts* و *loyaltyScheme_loyCustomers*، فهذه علاقة متعددة التنقلات والمسارات.

:::image type="content" source="media/multi-hop_multi-path_relationship.png" alt-text="يتصل الكيان المصدر مباشرة بكيان هدف واحد ويتصل بكيان هدف آخر من خلال كيان وسيط.":::

## <a name="next-step"></a>الخطوة التالية

تُستخدم علاقات النظام والعلاقات المخصصة بهدف [إنشاء مقاطع](segments.md) و[مقاييس](measures.md) بالاستناد إلى مصادر بيانات متعددة لم تعد منعزلة.

[!INCLUDE [footer-include](includes/footer-banner.md)]
